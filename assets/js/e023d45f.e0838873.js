"use strict";(self.webpackChunkprotoconf=self.webpackChunkprotoconf||[]).push([[7704],{2277:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var o=n(4848),r=n(5680);const a={},s="Using google.protobuf.Any",i={id:"advanced-usage/protobuf-any",title:"Using google.protobuf.Any",description:"The google.protobuf.Any type is a powerful feature in Protocol Buffers that allows you to store arbitrary messages in your protobufs. It works by wrapping the message and embedding the name of the message's type. This allows the actual type of the embedded message to be discovered and the message to be correctly deserialized at runtime.",source:"@site/docs/advanced-usage/protobuf-any.mdx",sourceDirName:"advanced-usage",slug:"/advanced-usage/protobuf-any",permalink:"/docs/0.1.7/advanced-usage/protobuf-any",draft:!1,unlisted:!1,editUrl:"https://github.com/protoconf/protoconf/tree/main/website/protoconf/docs/advanced-usage/protobuf-any.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using gRPC",permalink:"/docs/0.1.7/advanced-usage/mutation-service/grpc"},next:{title:"Standard Libraries",permalink:"/docs/0.1.7/advanced-usage/starlib"}},c={},d=[];function l(e){const t={code:"code",h1:"h1",p:"p",pre:"pre",...(0,r.RP)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"using-googleprotobufany",children:"Using google.protobuf.Any"}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"google.protobuf.Any"})," type is a powerful feature in Protocol Buffers that allows you to store arbitrary messages in your protobufs. It works by wrapping the message and embedding the name of the message's type. This allows the actual type of the embedded message to be discovered and the message to be correctly deserialized at runtime."]}),"\n",(0,o.jsxs)(t.p,{children:["In Protocol Buffers, you can use the ",(0,o.jsx)(t.code,{children:"Any"})," type in your message definitions like this:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-protobuf",children:'import "google/protobuf/any.proto";\n\nmessage MyMessage {\n  google.protobuf.Any data = 1;\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["You can then store any kind of message in the ",(0,o.jsx)(t.code,{children:"data"})," field. When you serialize ",(0,o.jsx)(t.code,{children:"MyMessage"}),", Protocol Buffers will also serialize the embedded message and store its type name alongside it. When you later deserialize ",(0,o.jsx)(t.code,{children:"MyMessage"}),", you can discover the type of the embedded message by inspecting the type name, and then deserialize the embedded message as that type."]}),"\n",(0,o.jsxs)(t.p,{children:["In Protoconf Starlark code, you can use the ",(0,o.jsx)(t.code,{children:"Any"})," type with the help of the ",(0,o.jsx)(t.code,{children:"any.star"})," module. First, you have to load the module:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'load("any.star", "any")\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Then, you can pack any message into an ",(0,o.jsx)(t.code,{children:"Any"})," type:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"myconfig = ServerConfiguration()\nmyany = any.pack(myconfig)\n"})}),"\n",(0,o.jsxs)(t.p,{children:["In this example, ",(0,o.jsx)(t.code,{children:"myconfig"})," is an instance of the ",(0,o.jsx)(t.code,{children:"ServerConfiguration"})," message. The ",(0,o.jsx)(t.code,{children:"any.pack()"})," function takes this message and wraps it in an ",(0,o.jsx)(t.code,{children:"Any"})," type. You can then use ",(0,o.jsx)(t.code,{children:"myany"})," in your Protoconf code as a standard message."]}),"\n",(0,o.jsxs)(t.p,{children:["It's important to note that the ",(0,o.jsx)(t.code,{children:"Any"})," type is a powerful tool for creating flexible APIs and configuration schemas, but it also comes with its complexities. The main complexity is that you must know the type of the embedded message to correctly unpack it. Therefore, you should be cautious when using ",(0,o.jsx)(t.code,{children:"Any"})," and ensure that the type information is always available when needed."]})]})}function u(e={}){const{wrapper:t}={...(0,r.RP)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},5680:(e,t,n)=>{n.d(t,{RP:()=>d});var o=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),d=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=d(n),h=r,y=p["".concat(c,".").concat(h)]||p[h]||l[h]||a;return n?o.createElement(y,s(s({ref:t},u),{},{components:n})):o.createElement(y,s({ref:t},u))}));u.displayName="MDXCreateElement"}}]);